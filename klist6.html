<html>
<head>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

</head>

<body style="font-family:'Playfair Display SC'">

    <center> <h1> Khan Academy Dashboard v .0001 </h1></center>

    <span></span>

    <script type="text/javascript">

$.getJSON( "https://dl.dropboxusercontent.com/u/11613553/Khan%20data2.json", function( data, i ) {

var items=[];


$.each(data, function(i){
   
    var rskills = ["evaluating_expressions_1", "linear_equations_2", "adding_and_subtracting_negative_numbers"];
    var nickname= data[i].nickname;
    var allskill = data[i].all_proficient_exercises;

    var unique = $.grep(allskill, function(element) {
        return $.inArray(element, rskills) !== -1;
    });

    console.log(unique);
        if($.inArray(allskill, rskills) !== -1){
            console.log(allskill);
        } else {
        console.log('false');
    };
  

    items.push( '<tr><td>' + data[i].nickname + 
        '</td> <td><img height="25px" width="25px" src="' 
        + data[i].avatar_url + '"</img></td><td>');

if(unique.length !== 0){
    items.push('<td><Completed: &nbsp</td>');
  $.each(unique, function (i2) {
        items.push('<td>' + unique[i2] + '</td><tr><td><td><td><td>');
    } );
} else {
    items.push('<td>You completed nothing.</td>');
}


    items.push('</tr>');

//    if($.inArray(allskill, rskills) !== -1){
 //       var split = [];
 //       $.each(allskill, function (i2) {
  //      items.push(split[i2]);
//        });
//       items.push('</tr>');
//    } else {
//        items.push('<td></td></tr>');

 //   }


    });

//    if($.inArray(nickname, rskills) !== -1){
//        console.log("true");
//        items.push('<li>' + nickname + '</li>');
//    } else {
//    console.log("false");
//    }

    
$( "<ul/>", {
    "class": "exercises",
    html: items.join( "" )
  }).appendTo( "body" );


});

</script>

<script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Playfair+Display+SC::latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); </script>

<center>  2014 - Daniel Holder </center>

</body>
</html>